<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... (código anterior permanece o mesmo) ... -->
</head>
<body>
    <!-- ... (código anterior permanece o mesmo) ... -->

    <script>
        function startWebSocket(camera) {
            const video = document.getElementById(`camera${camera}`);
            
            // Usar 'wss://' para WebSocket seguro
            const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsUrl = `${protocol}//${window.location.host}/stream${camera}`;
            const ws = new WebSocket(wsUrl);

            ws.onmessage = (event) => {
                const blob = event.data;
                const url = URL.createObjectURL(blob);
                video.src = url;
            };

            ws.onerror = (error) => {
                console.error(`WebSocket error for camera ${camera}:`, error);
            };

            ws.onclose = () => {
                console.log(`WebSocket connection closed for camera ${camera}`);
            };
        }

        // ... (o resto do código permanece o mesmo) ...
    </script>
</body>
</html>